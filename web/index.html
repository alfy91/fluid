<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Fluid: Data-Transparent Visualisation</title>
  <script src="https://use.fontawesome.com/1091715d00.js"></script>
  <link href="css/styles.css" rel="stylesheet" type="text/css">
  <link href="css/simplegrid.css" rel="stylesheet" type="text/css">
  <link href="css/data-viz.css" rel="stylesheet" type="text/css">
  <script src="app.js"></script>
</head>
<body>

<div class="grid grid-pad">
   <div class="col-3-12 align-right">
      <img src="https://i.ytimg.com/vi/IjS2sVPR2Zc/maxresdefault.jpg" width="80%">
      <img src="https://i.ibb.co/zNqHKg7/University-of-Bristol-logo.png" width="80%">
   </div>
   <div class="col-9-12">
      <nav>
         <ul>
            <li>
               <a href="." class="active-page">Latest</a>
            </li>
            <li>
            <a href="https://f.luid.org/0.3.1">v0.3.1</a>
            </li>
         </ul>
      </nav><br>
      <p><a href="https://github.com/explorable-viz/fluid">GitHub</a> &#183;
      <a href="https://dl.acm.org/doi/10.1145/3498668">POPL 2022 paper</a> &#183;
      <a href="https://www.youtube.com/watch?v=M_ePrtD9axk">POPL talk</a>
      <h2>Language-integrated data provenance</h2>
   </div>
</div>

<div id="FLUID" class="grid grid-pad">
   <div class="col-3-12 align-right">
      <h3 class="title lowercase">Fluid</h3>
   </div>
   <div class="col-9-12">
      <p>Understanding charts, diagrams and other visual information means understanding what visual elements <b>represent</b>: how specific visual elements relate to the data they were computed from. <b>Fluid</b> is an experimental programming language which integrates a bidirectional dynamic analysis to connect outputs to data sources in a fine-grained way. The user can then to explore connections between data and chart for themselves, without the programmer have had to antipate this requirement and explicitly program it themselves. If the user selects a bar in a bar chart computed from a table of data, we can automatically provide a view of the underlying table containing only the data needed to compute the selected bar. Our approach also allows us ask these questions in the other direction: given an input selection, what parts of the output do we have sufficient data for?
   </div>

   <div class="col-3-12 align-right">
      <h3 class="title lowercase">data-linked visualisations</h3>
   </div>
   <div class="col-9-12">
      <p></p>Try this out by selecting (clicking on) the bar for Germany in the left-hand chart below. Then try one of the data points for the year 2018 in the right-hand chart. (Try zooming in if it's hard to select points in the line chart.) When a view selection is active, we automatically provide what we call a <b>data selection</b>: a restricted view of a dataset where only relevant rows are shown and relevant cells within those rows are highlighted. The relationship between the output selection and the resulting inputs selection is monotonic: the more output you select, the more input is selected. (Our UI doesn't support this yet but it is also meaningful to select input and have the output selection be derived automatically.)
      <p><div id="fig-1"></div></p>
      <p>Hand-crafting transparency features like this would involve manually tracking the dependencies between input and output. Fluid does this automatically, allowing the programmer to simply express the bar chart and line chart as pure functions, using standard functional programming features such as higher-order functions and list comprehensions. Take a look at the source code below:
      <details><summary>bar-chart.fld and line-chart.fld</summary>
         <script src="https://gist.github.com/rolyp/7d4c2240e6a588d9b3844c025b7db920.js"></script>
         <script src="https://gist.github.com/rolyp/a2bed1325ef0ace335d8fa0fd304acd5.js"></script>
      </details>
      <p>The mathematics of our bidirectional analysis is described by a <b>Galois connection</b> between Boolean algebras. This establishes that the forward and backward analyses round-trip: the data selection computed by the backwards analysis for a given view selection, if fed into the forward analysis, will suffice for (at least) the original view selection; and the view selection computed by the forwards analysis, if fed into the backwards analysis, will require (no more than) the original data selection. See our <a href="https://dl.acm.org/doi/10.1145/3498668">paper</a> for more on the formal setting.

      <p>One of the more interesting things about the mathematical setting is that the Galois connections have a (contravariant) De Morgan dual. This allows the bidirectional dependency analysis to be inverted by transposing the roles of the upper and lower adjoints. In turns out we can use this to link two outputs generated from the same input, a feature sometimes called <b>brushing and linking</b>. Try selecting the bar for USA or China in the left-hand chart: you will see that all the points relating to 2015 are automatically selected in the right-hand chart. These are the parts of the right-hand output which are &#8220;competing for resources&#8221; with the selection on the left. You can play this game in the other direction by selecting any point from 2015, which will highlight both USA and China on the left.

      As well as offering the first fully automated (and thus potentially pervasive) solution to this well-recognised problem in data visualisation, our version of brushing and linking is &#8220;data transparent&#8221;: a view of the specific data elements which explain why the two visual elements are linked can always be made available.
   </div>

   <div class="col-3-12 align-right">
      <h3 class="title lowercase">infrastructure for <br>explorable explanations</h3>
   </div>
   <div class="col-9-12">
      <p>Matrix convolution (zero-padded):
      <p><div id="fig-conv-1"></div>
      <p>Contrast the above with the following implementation of matrix convolution which used wrap rather than padding with zeros:
      <p><div id="fig-conv-2"></div>
      <p>As before, the source code is a pure function:
      <details><summary>convolution.fld and conv-emboss-wrap.fld</summary>
         <script src="https://gist.github.com/rolyp/64b04a6a6fc73164d7fbbd1b82365b67.js"></script>
         <script src="https://gist.github.com/rolyp/2bd783007d919d97e64ba66a6ede8c3a.js"></script>
      </details>
   </div>
</div>

</body>
</html>
