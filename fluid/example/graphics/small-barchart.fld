let totalFor c rows =
    sum [ row.output | row <- rows, row.country == c ];
let data2015 = [ row | row <- renewables, row.year == 2015 ];
    countryData = [ { x: c, bars: [ { y: "output", z: totalFor c data2015 } ] }
                | c <- ["USA"] ]
in BarChart {
    caption: "Total output by country",
    data: countryData
}