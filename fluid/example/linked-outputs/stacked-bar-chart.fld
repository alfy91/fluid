let totalFor c rows =
         sum [ row.nuclearOut | row <- rows, row.country == c ];
let data2015 = [ row | row <- nonRenewables, row.year == 2015 ];
    countryData = [ { x: c, bars: [ { y: "output", z: totalFor c data2015 } ] }
                   | c <- ["CHN", "USA", "DEU"] ]
in BarChart {
   caption: "Nuclear output by country",
   data: countryData
}
