let country_gdp c_name countries_list cities = sum [city.gdp|country <- countries_list, c_name == country.name, city <- cities, country_city <- country.cities, city.name == country_city] in
let all_countries = [{name : "Germany", cities : ["Berlin", "Hamburg", "Munich"]}
                   ] in
let all_cities = [{name : "Berlin", gdp : ⸨100⸩, country : "Germany"}
                , {name : "Munich", gdp : ⸨80⸩, country : "Germany"}
                , {name : "Hamburg", gdp : ⸨60⸩, country : "Germany"}
                , {name : "London", gdp : 200, country : "UK"}
                ] in
country_gdp "Germany" all_countries all_cities